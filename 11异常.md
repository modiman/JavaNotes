# 11-异常

# 异常 日志 断言 调试

## 11.1 处理异常

  如果出现错误，程序应该

* 返回到一种安全状态，并能够让用户执行一些命令，或者
* 允许用户保存所有操作的结果，并以适当的方式终止程序

**常见错误**

1. 用户输入错误
2. 设备错误
3. 物理限制
4. 代码错误

### 11.1.1 异常分类

![image-20211008205504453](C:\Users\modige\AppData\Roaming\Typora\typora-user-images\image-20211008205504453.png)

所有的异常都继承自Throwable，但在下一层分为Error和Exception

* Error类层次结构描述了Java运行时系统的内部错误和资源耗尽错误。
* 系统主要关注Exception层次结构

**Exception又分为两个分支，一个分支派生于RuntimeException,另一个分支包含其他异常**

派生于RuntimeException的异常包含以下几种情况

* 错误的类型转换
* 数组访问越界
* 访问空指针

**其他异常包括**

* 试图在文件尾部读取数据
* 试图打开一个错误格式的URL、
* 试图根据给定的字符串查找Class对象，而这个字符串表示的类不存在

**Java语言规范将所有派生于Error和Exception的异常称为未检查异常，其他异常称为已检查异常**、

### 11.1.2 声明已检查异常

方法应该在其首部声明所有可能出现的已检查异常、



### 11.1.3如何抛出异常

 对于一个已经存在的异常类，将其抛出非常容易，在这种情况下

1. 找到一个合适的异常类
2. 创建这个类的一个对象
3. 将对象抛出

一旦方法抛出了异常，这个方法就不可能返回到调用者，也就是说不用为返回的默认值或错误代码担忧

### 11.1.4 创建异常类

* 当标准异常类不能充分描述问题时，需要创建自己的异常类

* 需要做的是定义一个派生于Exception或者其子类的类
* 习惯上定义的类应该包含两个构造器，一个是默认的构造器，另一个是带有详细描述信息的构造器

## 11.2 捕获异常

 到目前为止，已经知道如何抛出一个异常

要想捕获一个异常，必须设置try/catch语句块，最简单的try语句块如下所示



```java
try{
    code;
}
catch(Exception e){
    handler for this type
}
```

如果在try语句块抛出了任何一个在catch中说明的异常类，那么

1.  程序将跳过try语句块中的其他代码
2. 程序将执行catch字句中的处理器代码

如果没有出现异常，程序将跳过catch字句

### 11.2.1捕获多个异常

在一个try字句中可以捕获多个异常类型，并对不同类型的异常做出不同的处理

```java
try{
    
}
catch(Exception e1){
}
catch(Exception e2){
    
}
```

### 11.2.2 再次抛出异常

在catch字句中可以抛出一个异常，这是为了改变异常类型

### 11.2.3 finally字句











